@startuml
start
:HTTP请求("/recommend");
if (会员已登录?) then (是)
    :获取会员信息;
    if (订单历史为空?) then (是)
        :获取所有商品;
        :获取图片列表;
    else (否)
        :计算最喜欢的类别;
        :获取最喜欢类别的所有商品;
        :计算其他类别商品的相似度;
        :获取所有可能喜欢的商品;
        :使用朴素贝叶斯分类器分析评论;
        :输出评价优胜的商品;
        :获取图片列表;
    endif
else (否)
    :获取所有商品;
    :获取图片列表;
endif
:设置请求属性;
:返回视图"recommend";
stop
@enduml
